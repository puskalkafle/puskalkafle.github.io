{"ast":null,"code":"import _regeneratorRuntime from \"/Users/puskal/Documents/Web_Development/puskalkafle.github.io/source/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/puskal/Documents/Web_Development/puskalkafle.github.io/source/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/puskal/Documents/Web_Development/puskalkafle.github.io/source/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"/Users/puskal/Documents/Web_Development/puskalkafle.github.io/source/node_modules/@babel/runtime/helpers/esm/extends\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/puskal/Documents/Web_Development/puskalkafle.github.io/source/components/ItemSearch.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Container, Row, Col } from 'react-grid-system';\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\nimport Select, { components } from 'react-select';\nimport Button from './common/Button';\nimport { useRouter } from 'next/router';\nimport { getAutoSuggestions } from 'utils/api';\nimport LocationMarkerIcon from '../public/assets/icon/location-marker.svg';\nimport HotelIcon from '../public/assets/icon/hotel.svg';\nimport Icon from './common/Icon';\nvar options = [{\n  value: '1',\n  label: '1'\n}, {\n  value: '2',\n  label: '2'\n}, {\n  value: '3',\n  label: '3'\n}];\nvar Option = components.Option;\n\nvar IconOption = function IconOption(props) {\n  var _props$data, _props$data2;\n\n  return __jsx(Option, _extends({}, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 3\n    }\n  }), (props === null || props === void 0 ? void 0 : (_props$data = props.data) === null || _props$data === void 0 ? void 0 : _props$data.type) === 'hotel' ? __jsx(Icon, {\n    icon: __jsx(HotelIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 19\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }\n  }) : __jsx(Icon, {\n    icon: __jsx(LocationMarkerIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 19\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }), props === null || props === void 0 ? void 0 : (_props$data2 = props.data) === null || _props$data2 === void 0 ? void 0 : _props$data2.label);\n};\n\n_c = IconOption;\n\nvar ItemSearch = function ItemSearch() {\n  _s();\n\n  var _searchParams$checkIn, _searchParams$checkOu, _searchParams$checkIn2;\n\n  var _useRouter = useRouter(),\n      query = _useRouter.query;\n\n  var router = useRouter();\n\n  var _useState = useState([]),\n      suggestDest = _useState[0],\n      setSuggestDest = _useState[1];\n\n  var _useState2 = useState('HOTELS'),\n      activeTab = _useState2[0],\n      setActiveTab = _useState2[1];\n\n  var switchToTours = function switchToTours() {\n    return setActiveTab('TOURS');\n  };\n\n  var switchToHotels = function switchToHotels() {\n    return setActiveTab('HOTELS');\n  };\n\n  var defaultCheckIn = new Date(new Date().setDate(new Date().getDate() + 14)).toLocaleDateString();\n  var defaultCheckOut = new Date(new Date().setDate(new Date().getDate() + 21)).toLocaleDateString();\n\n  var _useState3 = useState({}),\n      searchParams = _useState3[0],\n      setSearchParams = _useState3[1];\n\n  useEffect(function () {\n    setSearchParams({\n      destination: query === null || query === void 0 ? void 0 : query.destination,\n      checkIn: (query === null || query === void 0 ? void 0 : query.checkIn) || defaultCheckIn,\n      checkOut: (query === null || query === void 0 ? void 0 : query.checkOut) || defaultCheckOut,\n      people: query === null || query === void 0 ? void 0 : query.people,\n      selectedOption: (query === null || query === void 0 ? void 0 : query.destination) ? {\n        label: query === null || query === void 0 ? void 0 : query.destination,\n        value: query === null || query === void 0 ? void 0 : query.destination\n      } : null\n    });\n  }, [query, defaultCheckIn, defaultCheckOut]);\n  var datePickerCheckIn = new Date(searchParams === null || searchParams === void 0 ? void 0 : (_searchParams$checkIn = searchParams.checkIn) === null || _searchParams$checkIn === void 0 ? void 0 : _searchParams$checkIn.toString());\n  var datePickerCheckOut = new Date(searchParams === null || searchParams === void 0 ? void 0 : (_searchParams$checkOu = searchParams.checkOut) === null || _searchParams$checkOu === void 0 ? void 0 : _searchParams$checkOu.toString());\n  var disabledCheckIn = new Date();\n  var disabledCheckOut = new Date(new Date().setDate(new Date(searchParams === null || searchParams === void 0 ? void 0 : (_searchParams$checkIn2 = searchParams.checkIn) === null || _searchParams$checkIn2 === void 0 ? void 0 : _searchParams$checkIn2.toString()).getDate() + 1));\n\n  var handleDestinationSelectionChange = function handleDestinationSelectionChange(selectedOption) {\n    setSearchParams(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        destination: selectedOption.value,\n        selectedOption: selectedOption\n      });\n    });\n  };\n\n  var handleDestinationInputChange = function handleDestinationInputChange(value) {\n    fetchSuggestions(value);\n  };\n\n  var fetchSuggestions = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n      var autoSuggestions, newMappedArray, _autoSuggestions$data, _autoSuggestions$data2;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getAutoSuggestions(value);\n\n            case 2:\n              autoSuggestions = _context.sent;\n              newMappedArray = [];\n\n              if (!((autoSuggestions === null || autoSuggestions === void 0 ? void 0 : autoSuggestions.data) === null)) {\n                newMappedArray = autoSuggestions === null || autoSuggestions === void 0 ? void 0 : (_autoSuggestions$data = autoSuggestions.data) === null || _autoSuggestions$data === void 0 ? void 0 : (_autoSuggestions$data2 = _autoSuggestions$data.map) === null || _autoSuggestions$data2 === void 0 ? void 0 : _autoSuggestions$data2.call(_autoSuggestions$data, function (suggestion) {\n                  return _objectSpread(_objectSpread({}, suggestion), {}, {\n                    value: suggestion.name,\n                    label: suggestion.name\n                  });\n                });\n              }\n\n              setSuggestDest(newMappedArray);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchSuggestions(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleSubmit = function handleSubmit(e) {\n    var _searchParams$selecte;\n\n    if ((searchParams === null || searchParams === void 0 ? void 0 : (_searchParams$selecte = searchParams.selectedOption) === null || _searchParams$selecte === void 0 ? void 0 : _searchParams$selecte.type) === 'hotel') {\n      var _searchParams$selecte2;\n\n      router.push({\n        pathname: '/hotels-detail',\n        query: {\n          hotelId: searchParams === null || searchParams === void 0 ? void 0 : (_searchParams$selecte2 = searchParams.selectedOption) === null || _searchParams$selecte2 === void 0 ? void 0 : _searchParams$selecte2.id,\n          destination: searchParams === null || searchParams === void 0 ? void 0 : searchParams.destination,\n          checkIn: searchParams === null || searchParams === void 0 ? void 0 : searchParams.checkIn,\n          checkOut: searchParams === null || searchParams === void 0 ? void 0 : searchParams.checkOut,\n          people: searchParams === null || searchParams === void 0 ? void 0 : searchParams.people\n        }\n      });\n    } else {\n      var _searchParams$selecte3;\n\n      router.push({\n        pathname: '/search',\n        query: {\n          destination: searchParams === null || searchParams === void 0 ? void 0 : searchParams.destination,\n          checkIn: searchParams === null || searchParams === void 0 ? void 0 : searchParams.checkIn,\n          checkOut: searchParams === null || searchParams === void 0 ? void 0 : searchParams.checkOut,\n          people: searchParams === null || searchParams === void 0 ? void 0 : searchParams.people,\n          searchType: searchParams === null || searchParams === void 0 ? void 0 : (_searchParams$selecte3 = searchParams.selectedOption) === null || _searchParams$selecte3 === void 0 ? void 0 : _searchParams$selecte3.type\n        }\n      });\n    }\n\n    e.preventDefault();\n  };\n\n  var handleCheckIn = function handleCheckIn(event) {\n    setSearchParams(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        checkIn: event.toLocaleDateString()\n      });\n    });\n  };\n\n  var handleCheckOut = function handleCheckOut(event) {\n    setSearchParams(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        checkOut: event.toLocaleDateString()\n      });\n    });\n  };\n\n  return __jsx(SearchContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 5\n    }\n  }, __jsx(StyledContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }, __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, __jsx(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"filters\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"tabs\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: activeTab === 'HOTELS' ? 'tab active' : 'tab',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    onClick: switchToHotels,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 19\n    }\n  }, __jsx(\"i\", {\n    className: \"fas fa-hotel\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  }), \"HOTELS\")), __jsx(\"div\", {\n    className: activeTab === 'TOURS' ? 'tab active' : 'tab',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    onClick: switchToTours,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }, __jsx(\"i\", {\n    className: \"fa fa-briefcase\",\n    \"aria-hidden\": \"true\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }), \"TOURS\"))), __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    action: \"/hotels-search\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"filter-wrap\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, __jsx(Container, {\n    fluid: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 19\n    }\n  }, __jsx(Row, {\n    className: \"filter-items\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  }, __jsx(Col, {\n    xs: 12,\n    md: 6,\n    lg: 3,\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 23\n    }\n  }, __jsx(\"i\", {\n    className: \"fas fa-search\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 25\n    }\n  }), __jsx(Select, {\n    value: searchParams === null || searchParams === void 0 ? void 0 : searchParams.selectedOption,\n    onChange: handleDestinationSelectionChange,\n    onInputChange: handleDestinationInputChange,\n    options: suggestDest,\n    openMenuOnClick: false,\n    placeholder: \"Select Destination\",\n    components: {\n      Option: IconOption\n    },\n    className: \"custom-select\",\n    classNamePrefix: \"custom-select\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 25\n    }\n  })), __jsx(Col, {\n    xs: 6,\n    md: 6,\n    lg: 3,\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 23\n    }\n  }, __jsx(\"i\", {\n    className: \"fas fa-calendar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 25\n    }\n  }), __jsx(DayPickerInput, {\n    placeholder: 'Check-In',\n    onDayChange: handleCheckIn,\n    value: datePickerCheckIn,\n    dayPickerProps: {\n      modifiers: {\n        disabled: [{\n          before: disabledCheckIn\n        }]\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 25\n    }\n  })), __jsx(Col, {\n    xs: 6,\n    md: 6,\n    lg: 3,\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 23\n    }\n  }, __jsx(\"i\", {\n    className: \"fas fa-calendar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 25\n    }\n  }), __jsx(DayPickerInput, {\n    placeholder: 'Check-Out',\n    onDayChange: handleCheckOut,\n    value: datePickerCheckOut,\n    dayPickerProps: {\n      modifiers: {\n        disabled: [{\n          before: disabledCheckOut\n        }]\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  })), __jsx(Col, {\n    xs: 12,\n    md: 6,\n    lg: 3,\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 23\n    }\n  }, __jsx(\"i\", {\n    className: \"fas fa-users\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 25\n    }\n  }), __jsx(Select, {\n    className: \"custom-select\",\n    classNamePrefix: \"custom-select\",\n    placeholder: 'No.of people',\n    options: options,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 25\n    }\n  }))))), __jsx(SubmitButton, {\n    look: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  }, activeTab, \" \", __jsx(\"i\", {\n    className: \"fas fa-long-arrow-alt-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 31\n    }\n  }))))))));\n};\n\n_s(ItemSearch, \"WLJNTeRRCIBR97u5ffMhd9bYPTo=\", false, function () {\n  return [useRouter, useRouter];\n});\n\n_c2 = ItemSearch;\nvar SubmitButton = styled(Button).withConfig({\n  displayName: \"ItemSearch__SubmitButton\",\n  componentId: \"cd2zjn-0\"\n})([\"align-self:stretch;@media (min-width:576px){padding:\", \";}\"], function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.spacing.l;\n});\n_c3 = SubmitButton;\nvar SearchContainer = styled.div.withConfig({\n  displayName: \"ItemSearch__SearchContainer\",\n  componentId: \"cd2zjn-1\"\n})([\".filter-wrap{background:\", \";padding:\", \" \", \";@media (max-width:768px){padding:\", \";}@media (max-width:576px){padding:0;}flex-grow:1;align-items:center;.form-group{@media (max-width:768px){margin-bottom:\", \";}@media (max-width:576px){margin:0;height:40px;border:1px solid \", \";}}.form-group,.datepicker-wrap{display:flex;align-items:center;}}form{width:100%;display:flex;align-items:center;box-shadow:0px 25px 60px #aaaaaa29;@media (max-width:768px){flex-direction:column;}input,.custom-select{margin-left:10px;width:100%;border:none;border-bottom:1px dashed transparent;&:focus{outline:none;border-bottom:1px dashed \", \";}}.DayPickerInput{display:initial;width:100%;}.custom-select{width:100%;.custom-select__control{border:none;box-shadow:none;border-bottom:1px dashed transparent;&:focus{outline:none;border-bottom:1px dashed \", \";}}.custom-select__placeholder{margin:0;}.custom-select__indicator,.custom-select__value-container{padding:0;}.custom-select__indicator-separator{display:none;}}}@media (max-width:576px){margin-top:-\", \";}@media (min-width:768px){margin-top:-\", \";}margin-top:-\", \";z-index:99;.tabs{display:flex;.tab{background:\", \";margin-right:10px;padding:\", \" \", \";display:flex;align-items:center;@media (max-width:768px){flex:1 1 auto;}font-weight:bold;color:\", \";cursor:pointer;&:last-child{margin-right:0;}&.active{background:\", \";color:\", \";}i{display:inline-block;margin-right:10px;}}}\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.colors.white;\n}, function (_ref4) {\n  var theme = _ref4.theme;\n  return theme.spacing.xl;\n}, function (_ref5) {\n  var theme = _ref5.theme;\n  return theme.spacing.m;\n}, function (_ref6) {\n  var theme = _ref6.theme;\n  return theme.spacing.m;\n}, function (_ref7) {\n  var theme = _ref7.theme;\n  return theme.spacing.m;\n}, function (_ref8) {\n  var theme = _ref8.theme;\n  return theme.colors.primary[\"default\"];\n}, function (_ref9) {\n  var theme = _ref9.theme;\n  return theme.colors.border;\n}, function (_ref10) {\n  var theme = _ref10.theme;\n  return theme.colors.border;\n}, function (_ref11) {\n  var theme = _ref11.theme;\n  return theme.spacing.xxxxxl;\n}, function (_ref12) {\n  var theme = _ref12.theme;\n  return theme.spacing.xxxxl;\n}, function (_ref13) {\n  var theme = _ref13.theme;\n  return theme.spacing.xxl;\n}, function (_ref14) {\n  var theme = _ref14.theme;\n  return theme.colors.primary.light;\n}, function (_ref15) {\n  var theme = _ref15.theme;\n  return theme.spacing.m;\n}, function (_ref16) {\n  var theme = _ref16.theme;\n  return theme.spacing.xl;\n}, function (_ref17) {\n  var theme = _ref17.theme;\n  return theme.colors.primary[\"default\"];\n}, function (_ref18) {\n  var theme = _ref18.theme;\n  return theme.colors.primary[\"default\"];\n}, function (_ref19) {\n  var theme = _ref19.theme;\n  return theme.colors.white;\n});\n_c4 = SearchContainer;\nvar StyledContainer = styled(Container).withConfig({\n  displayName: \"ItemSearch__StyledContainer\",\n  componentId: \"cd2zjn-2\"\n})([\"position:relative;margin-bottom:\", \";\"], function (_ref20) {\n  var theme = _ref20.theme;\n  return theme.spacing.xxxl;\n});\n_c5 = StyledContainer;\nexport default ItemSearch;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"IconOption\");\n$RefreshReg$(_c2, \"ItemSearch\");\n$RefreshReg$(_c3, \"SubmitButton\");\n$RefreshReg$(_c4, \"SearchContainer\");\n$RefreshReg$(_c5, \"StyledContainer\");","map":{"version":3,"sources":["/Users/puskal/Documents/Web_Development/puskalkafle.github.io/source/components/ItemSearch.tsx"],"names":["React","useEffect","useState","styled","Container","Row","Col","DayPickerInput","Select","components","Button","useRouter","getAutoSuggestions","LocationMarkerIcon","HotelIcon","Icon","options","value","label","Option","IconOption","props","data","type","ItemSearch","query","router","suggestDest","setSuggestDest","activeTab","setActiveTab","switchToTours","switchToHotels","defaultCheckIn","Date","setDate","getDate","toLocaleDateString","defaultCheckOut","searchParams","setSearchParams","destination","checkIn","checkOut","people","selectedOption","datePickerCheckIn","toString","datePickerCheckOut","disabledCheckIn","disabledCheckOut","handleDestinationSelectionChange","prevState","handleDestinationInputChange","fetchSuggestions","autoSuggestions","newMappedArray","map","suggestion","name","handleSubmit","e","push","pathname","hotelId","id","searchType","preventDefault","handleCheckIn","event","handleCheckOut","modifiers","disabled","before","SubmitButton","theme","spacing","l","SearchContainer","div","colors","white","xl","m","primary","border","xxxxxl","xxxxl","xxl","light","StyledContainer","xxxl"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\n\nimport styled from 'styled-components';\nimport { Container, Row, Col } from 'react-grid-system';\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\nimport Select, { components } from 'react-select';\nimport Button from './common/Button';\nimport { useRouter } from 'next/router';\n\nimport { getAutoSuggestions } from 'utils/api';\n\nimport LocationMarkerIcon from '../public/assets/icon/location-marker.svg';\nimport HotelIcon from '../public/assets/icon/hotel.svg';\nimport Icon from './common/Icon';\n\ninterface Props {}\n\nconst options = [\n  { value: '1', label: '1' },\n  { value: '2', label: '2' },\n  { value: '3', label: '3' },\n];\n\nconst { Option } = components;\nconst IconOption = (props: any) => (\n  <Option {...props}>\n    {props?.data?.type === 'hotel' ? (\n      <Icon icon={<HotelIcon />} />\n    ) : (\n      <Icon icon={<LocationMarkerIcon />} />\n    )}\n    {props?.data?.label}\n  </Option>\n);\n\nconst ItemSearch: React.FC<Props> = () => {\n  const { query } = useRouter();\n  const router = useRouter();\n\n  const [suggestDest, setSuggestDest] = useState([]);\n  const [activeTab, setActiveTab] = useState('HOTELS');\n\n  const switchToTours = () => setActiveTab('TOURS');\n\n  const switchToHotels = () => setActiveTab('HOTELS');\n\n  const defaultCheckIn = new Date(\n    new Date().setDate(new Date().getDate() + 14)\n  ).toLocaleDateString();\n  const defaultCheckOut = new Date(\n    new Date().setDate(new Date().getDate() + 21)\n  ).toLocaleDateString();\n\n  const [searchParams, setSearchParams] = useState<any>({});\n\n  useEffect(() => {\n    setSearchParams({\n      destination: query?.destination,\n      checkIn: query?.checkIn || defaultCheckIn,\n      checkOut: query?.checkOut || defaultCheckOut,\n      people: query?.people,\n      selectedOption: query?.destination\n        ? { label: query?.destination, value: query?.destination }\n        : null,\n    });\n  }, [query, defaultCheckIn, defaultCheckOut]);\n\n  const datePickerCheckIn = new Date(searchParams?.checkIn?.toString());\n  const datePickerCheckOut = new Date(searchParams?.checkOut?.toString());\n  const disabledCheckIn = new Date();\n  const disabledCheckOut = new Date(\n    new Date().setDate(\n      new Date(searchParams?.checkIn?.toString()).getDate() + 1\n    )\n  );\n\n  const handleDestinationSelectionChange = (selectedOption: any) => {\n    setSearchParams((prevState: any) => {\n      return {\n        ...prevState,\n        destination: selectedOption.value,\n        selectedOption,\n      };\n    });\n  };\n\n  const handleDestinationInputChange = (value: string) => {\n    fetchSuggestions(value);\n  };\n\n  const fetchSuggestions = async (value: string) => {\n    const autoSuggestions = await getAutoSuggestions(value);\n\n    let newMappedArray = [];\n\n    if (!(autoSuggestions?.data === null)) {\n      newMappedArray = autoSuggestions?.data?.map?.((suggestion: any) => {\n        return {\n          ...suggestion,\n          value: suggestion.name,\n          label: suggestion.name,\n        };\n      });\n    }\n\n    setSuggestDest(newMappedArray);\n  };\n\n  const handleSubmit = (e: any) => {\n    if (searchParams?.selectedOption?.type === 'hotel') {\n      router.push({\n        pathname: '/hotels-detail',\n        query: {\n          hotelId: searchParams?.selectedOption?.id,\n          destination: searchParams?.destination,\n          checkIn: searchParams?.checkIn,\n          checkOut: searchParams?.checkOut,\n          people: searchParams?.people,\n        },\n      });\n    } else {\n      router.push({\n        pathname: '/search',\n        query: {\n          destination: searchParams?.destination,\n          checkIn: searchParams?.checkIn,\n          checkOut: searchParams?.checkOut,\n          people: searchParams?.people,\n          searchType: searchParams?.selectedOption?.type,\n        },\n      });\n    }\n    e.preventDefault();\n  };\n\n  const handleCheckIn = (event: Date) => {\n    setSearchParams((prevState: any) => {\n      return {\n        ...prevState,\n        checkIn: event.toLocaleDateString(),\n      };\n    });\n  };\n\n  const handleCheckOut = (event: Date) => {\n    setSearchParams((prevState: any) => {\n      return {\n        ...prevState,\n        checkOut: event.toLocaleDateString(),\n      };\n    });\n  };\n\n  return (\n    <SearchContainer>\n      <StyledContainer>\n        <Row>\n          <Col>\n            <div className=\"filters\">\n              <div className=\"tabs\">\n                <div className={activeTab === 'HOTELS' ? 'tab active' : 'tab'}>\n                  <span onClick={switchToHotels}>\n                    <i className=\"fas fa-hotel\"></i>HOTELS\n                  </span>\n                </div>\n                <div className={activeTab === 'TOURS' ? 'tab active' : 'tab'}>\n                  <span onClick={switchToTours}>\n                    <i className=\"fa fa-briefcase\" aria-hidden=\"true\"></i>TOURS\n                  </span>\n                </div>\n              </div>\n              <form onSubmit={handleSubmit} action=\"/hotels-search\">\n                <div className=\"filter-wrap\">\n                  <Container fluid>\n                    <Row className=\"filter-items\">\n                      <Col xs={12} md={6} lg={3} className=\"form-group\">\n                        <i className=\"fas fa-search\"></i>\n\n                        <Select\n                          value={searchParams?.selectedOption}\n                          onChange={handleDestinationSelectionChange}\n                          onInputChange={handleDestinationInputChange}\n                          options={suggestDest}\n                          openMenuOnClick={false}\n                          placeholder=\"Select Destination\"\n                          components={{ Option: IconOption }}\n                          className=\"custom-select\"\n                          classNamePrefix=\"custom-select\"\n                        />\n                      </Col>\n                      <Col xs={6} md={6} lg={3} className=\"form-group\">\n                        <i className=\"fas fa-calendar\"></i>\n                        <DayPickerInput\n                          placeholder={'Check-In'}\n                          onDayChange={handleCheckIn}\n                          value={datePickerCheckIn}\n                          dayPickerProps={{\n                            modifiers: {\n                              disabled: [{ before: disabledCheckIn }],\n                            },\n                          }}\n                        />\n                      </Col>\n                      <Col xs={6} md={6} lg={3} className=\"form-group\">\n                        <i className=\"fas fa-calendar\"></i>\n                        <DayPickerInput\n                          placeholder={'Check-Out'}\n                          onDayChange={handleCheckOut}\n                          value={datePickerCheckOut}\n                          dayPickerProps={{\n                            modifiers: {\n                              disabled: [\n                                {\n                                  before: disabledCheckOut,\n                                },\n                              ],\n                            },\n                          }}\n                        />\n                      </Col>\n                      <Col xs={12} md={6} lg={3} className=\"form-group\">\n                        <i className=\"fas fa-users\"></i>\n                        <Select\n                          className=\"custom-select\"\n                          classNamePrefix=\"custom-select\"\n                          placeholder={'No.of people'}\n                          options={options}\n                        />\n                      </Col>\n                    </Row>\n                  </Container>\n                </div>\n\n                <SubmitButton look=\"primary\">\n                  {activeTab} <i className=\"fas fa-long-arrow-alt-right\"></i>\n                </SubmitButton>\n              </form>\n            </div>\n          </Col>\n        </Row>\n      </StyledContainer>\n    </SearchContainer>\n  );\n};\n\nconst SubmitButton = styled(Button)`\n  align-self: stretch;\n  @media (min-width: 576px) {\n    padding: ${({ theme }) => theme.spacing.l};\n  }\n`;\n\nconst SearchContainer = styled.div`\n  .filter-wrap {\n    background: ${({ theme }) => theme.colors.white};\n    padding: ${({ theme }) => theme.spacing.xl}\n      ${({ theme }) => theme.spacing.m};\n    @media (max-width: 768px) {\n      padding: ${({ theme }) => theme.spacing.m};\n    }\n    @media (max-width: 576px) {\n      padding: 0;\n    }\n    flex-grow: 1;\n    align-items: center;\n\n    .form-group {\n      @media (max-width: 768px) {\n        margin-bottom: ${({ theme }) => theme.spacing.m};\n      }\n      @media (max-width: 576px) {\n        margin: 0;\n        height: 40px;\n        border: 1px solid ${({ theme }) => theme.colors.primary.default};\n      }\n    }\n\n    .form-group,\n    .datepicker-wrap {\n      display: flex;\n      align-items: center;\n    }\n  }\n\n  form {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    box-shadow: 0px 25px 60px #aaaaaa29;\n\n    @media (max-width: 768px) {\n      flex-direction: column;\n    }\n    input,\n    .custom-select {\n      margin-left: 10px;\n      width: 100%;\n      border: none;\n      border-bottom: 1px dashed transparent;\n      &:focus {\n        outline: none;\n        border-bottom: 1px dashed ${({ theme }) => theme.colors.border};\n      }\n    }\n    .DayPickerInput {\n      display: initial;\n      width: 100%;\n    }\n    .custom-select {\n      width: 100%;\n      .custom-select__control {\n        border: none;\n        box-shadow: none;\n        border-bottom: 1px dashed transparent;\n        &:focus {\n          outline: none;\n          border-bottom: 1px dashed ${({ theme }) => theme.colors.border};\n        }\n      }\n      .custom-select__placeholder {\n        margin: 0;\n      }\n      .custom-select__indicator,\n      .custom-select__value-container {\n        padding: 0;\n      }\n      .custom-select__indicator-separator {\n        display: none;\n      }\n    }\n  }\n  @media (max-width: 576px) {\n    margin-top: -${({ theme }) => theme.spacing.xxxxxl};\n  }\n  @media (min-width: 768px) {\n    margin-top: -${({ theme }) => theme.spacing.xxxxl};\n  }\n  margin-top: -${({ theme }) => theme.spacing.xxl};\n  z-index: 99;\n\n  .tabs {\n    display: flex;\n    .tab {\n      background: ${({ theme }) => theme.colors.primary.light};\n      margin-right: 10px;\n      padding: ${({ theme }) => theme.spacing.m}\n        ${({ theme }) => theme.spacing.xl};\n      display: flex;\n      align-items: center;\n      @media (max-width: 768px) {\n        flex: 1 1 auto;\n      }\n      font-weight: bold;\n      color: ${({ theme }) => theme.colors.primary.default};\n      cursor: pointer;\n      &:last-child {\n        margin-right: 0;\n      }\n\n      &.active {\n        background: ${({ theme }) => theme.colors.primary.default};\n        color: ${({ theme }) => theme.colors.white};\n      }\n      i {\n        display: inline-block;\n        margin-right: 10px;\n      }\n    }\n  }\n`;\n\nconst StyledContainer = styled(Container)`\n  position: relative;\n  margin-bottom: ${({ theme }) => theme.spacing.xxxl};\n`;\nexport default ItemSearch;\n"]},"metadata":{},"sourceType":"module"}